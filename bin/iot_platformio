#!/usr/bin/env bash

[ "$IOTEMPOWER_ACTIVE" = "yes" ] || { echo "IoTempower not active, aborting." 1>&2;exit 1; }

# Running in Termux, set correct preloaded lib
GLIBC_PRELOAD=""
if [[ -n "$PREFIX" ]] && command -v apt-get &> /dev/null; then
  GLIBC_PRELOAD=""
else
  GLIBC_PRELOAD="$LD_PRELOAD"
fi

LD_PRELOAD="$GLIBC_PRELOAD" exec "$IOTEMPOWER_VPYTHON/bin/pio" "$@"
